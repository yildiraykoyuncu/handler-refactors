<!DOCTYPE html>
<html>

<head>
    <title>Substring</title>
    <meta charset="utf-8">

    <style>
        .input-field {
            width: 30%;
        }
    </style>

    <script src='../../lib/testing.js'></script>
    <script id='logic'>
        const getPartialStringTests = [{
            name: 'Test 1',
            args: ['tall', 4, 5],
            expected: ''
        }, {
            name: 'Test 2',
            args: ['888()888', 1, 3],
            expected: '88('
        }, {
            name: 'Test 3',
            args: ['falling trees', 0, 4],
            expected: 'fall'
        }, {
            name: 'Test 4',
            args: ['mangrove', 1, 5],
            expected: 'angro'
        }, {
            name: 'Test 5',
            args: ['everafter', -1, 2],
            expected: 'r'
        }, ];

        function getPartialString(str, beginIndex, endIndex) {
            const result = str.substr(beginIndex, endIndex);
            return result;
        }

        testing(getPartialString, getPartialStringTests);
    </script>
    <script id='handler'>
        function displaySubString(event) {
            debugger;
            // read & process user input
            const userString = event.target.form.string.value;

            const preStart = event.target.form.begin.value;
            const start = Number(preStart);

            const preEnd = event.target.form.end.value;
            const end = Number(preEnd);

            // execute core logic
            const result = getPartialString(userString, start, end)

            // communicate result to user
            document.getElementById('program-output').innerHTML = result;

            // log action for developers
            console.log('\n-- user action --');
            console.log('userString:', (typeof userString) + ',', userString);
            console.log('preStart:', (typeof preStart) + ',', preStart);
            console.log('start:', (typeof start) + ',', start);
            console.log('preEnd:', (typeof preEnd) + ',', preEnd);
            console.log('end:', (typeof end) + ',', end);
            console.log('result:', (typeof result) + ',', result);
        }
    </script>
</head>

<body>
    <section id='user-interface'>
        <form id='user-input'>
            <input name='string' class='input-field' placeholder="enter some text" />
            <input name='begin' class='input-field' type='number' placeholder="begin" />
            <input name='end' class='input-field' type='number' placeholder="end" />
        </form>
        <code id='program-output'></code>
    </section>

    <script id='listener'>
        document.getElementById('user-input').addEventListener('change', displaySubString);
    </script>
</body>

</html>